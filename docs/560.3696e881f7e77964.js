"use strict";(self.webpackChunkFresh_Cart=self.webpackChunkFresh_Cart||[]).push([[560],{4768:(A,h,l)=>{l.d(h,{e:()=>C});var _=l(8784),s=l(5619);const c_baseUrlAuth="https://ecommerce.routemisr.com/api/v1/auth";var e=l(9212),Z=l(1474),w=l(101);let C=(()=>{class d{constructor(o,u){this._HttpClient=o,this._Router=u,this.userData=new s.X(null),this.saveUser()}saveUser(){const o=localStorage.getItem("_token");if(o)try{const u=(0,_.o)(o);u.name&&this.userData.next(u)}catch(u){u.message.includes("Invalid token")&&(localStorage.removeItem("_token"),this._Router.navigate(["/login"]))}}setRegister(o){return this._HttpClient.post(c_baseUrlAuth+"/signup",o)}setLogin(o){return this._HttpClient.post(c_baseUrlAuth+"/signin",o)}setForgotPassword(o){return this._HttpClient.post(c_baseUrlAuth+"/forgotPasswords",o)}setVerifyResetCode(o){return this._HttpClient.post(c_baseUrlAuth+"/verifyResetCode",o)}resetPassword(o){return this._HttpClient.put(c_baseUrlAuth+"/resetPassword",o)}setChangePassword(o){return this._HttpClient.put("https://ecommerce.routemisr.com/api/v1/users/changeMyPassword",o)}static#e=this.\u0275fac=function(u){return new(u||d)(e.LFG(Z.eN),e.LFG(w.F0))};static#t=this.\u0275prov=e.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"})}return d})()},6560:(A,h,l)=>{l.r(h),l.d(h,{RegisterComponent:()=>k});var _=l(6814),s=l(6223),c=l(2618),e=l(9212),Z=l(4768),w=l(101),C=l(2425);const d=["myInput"];function x(t,a){1&t&&(e.TgZ(0,"p",25),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Name Is Required")," "))}function o(t,a){1&t&&(e.TgZ(0,"p",25),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Name Min Length is 3 chars")," "))}function u(t,a){1&t&&(e.TgZ(0,"p",25),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Name Max Length is 20")," "))}function v(t,a){if(1&t&&(e.ynx(0),e.YNc(1,x,3,3,"p",24)(2,o,3,3,"p",24)(3,u,3,3,"p",24),e.BQk()),2&t){const n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.f.name.getError("required")),e.xp6(1),e.Q6J("ngIf",n.f.name.getError("minlength")),e.xp6(1),e.Q6J("ngIf",n.f.name.getError("maxlength"))}}function T(t,a){1&t&&(e.TgZ(0,"p",25),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Email Is Required")," "))}function y(t,a){1&t&&(e.TgZ(0,"p",25),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Email Invalid Format")," "))}function L(t,a){if(1&t&&(e.ynx(0),e.YNc(1,T,3,3,"p",24)(2,y,3,3,"p",24),e.BQk()),2&t){const n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.f.email.getError("required")),e.xp6(1),e.Q6J("ngIf",n.f.email.getError("email"))}}function R(t,a){1&t&&(e.TgZ(0,"p",25),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Password Is Required")," "))}function I(t,a){1&t&&(e.TgZ(0,"p",25),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Must be at least 6 chars")," "))}function P(t,a){if(1&t&&(e.ynx(0),e.YNc(1,R,3,3,"p",24)(2,I,3,3,"p",24),e.BQk()),2&t){const n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.f.password.getError("required")),e.xp6(1),e.Q6J("ngIf",n.f.password.getError("pattern"))}}function U(t,a){1&t&&(e.TgZ(0,"p",25),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"RePassword Is Required")," "))}function E(t,a){1&t&&(e.TgZ(0,"p",25),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"RePassword confirmation is incorrect")," "))}function b(t,a){if(1&t&&(e.ynx(0),e.YNc(1,U,3,3,"p",24)(2,E,3,3,"p",24),e.BQk()),2&t){const n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.f.rePassword.getError("required")),e.xp6(1),e.Q6J("ngIf",n.f.rePassword.getError("mismatch"))}}function q(t,a){1&t&&(e.TgZ(0,"p",25),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"phone Is Required")," "))}function J(t,a){1&t&&(e.TgZ(0,"p",25),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"accept only egypt phone numbers")," "))}function Q(t,a){if(1&t&&(e.ynx(0),e.YNc(1,q,3,3,"p",24)(2,J,3,3,"p",24),e.BQk()),2&t){const n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.f.phone.getError("required")),e.xp6(1),e.Q6J("ngIf",n.f.phone.getError("pattern"))}}function S(t,a){if(1&t&&(e.TgZ(0,"button",26)(1,"span"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&t){const n=e.oxw();e.Q6J("disabled",n.registerForm.invalid),e.xp6(2),e.Oqu(e.lcZ(3,2,"Register"))}}function N(t,a){1&t&&(e.TgZ(0,"button",27)(1,"span"),e._UZ(2,"i",28),e.qZA()())}const f=(t,a,n)=>({"d-none":t,"end-0":a,"start-0":n});let k=(()=>{class t{constructor(n,i,r,g,m,p){this._AuthService=n,this._fb=i,this._Router=r,this.toastr=g,this.translate=m,this.renderer=p,this.passwordShow=!1,this.rePasswordShow=!1,this.isLoading=!1}ngOnInit(){this.registerForm=this._fb.group({name:["",[s.kI.required,s.kI.minLength(3),s.kI.maxLength(20)]],email:["",[s.kI.required,s.kI.email]],password:["",[s.kI.required,s.kI.pattern(/^\w{6,}$/)]],rePassword:[""],phone:["",[s.kI.required,s.kI.pattern(/^01[0125][0-9]{8}$/)]]},{validator:[this.checkPassword]}),this.translate.onLangChange.subscribe(n=>{this.updatePlaceholderStyle(n.lang)}),this.updatePlaceholderStyle(this.translate.currentLang||this.translate.defaultLang)}checkPassword(n){const i=n.get("password"),r=n.get("rePassword");""===r?.value?r?.setErrors({required:!0}):r?.value!==i?.value&&r?.setErrors({mismatch:!0})}get f(){return this.registerForm.controls}handleRegister(){this.isLoading=!0,this.registerForm.valid&&this._AuthService.setRegister(this.registerForm.value).subscribe({next:n=>{"success"===n.message&&(this.isLoading=!1,this._Router.navigate(["/login"]))},error:n=>{this.isLoading=!1,this.toastr.error(n.error.message,"Error",{progressBar:!0})}})}setPlaceholderStyle(){const n=this.myInput.nativeElement;this.renderer.setAttribute(n,"placeholder","Enter text here");const i=document.createElement("style");i.textContent="\n      .centered-placeholder::placeholder {\n        text-align: center; /* Center the placeholder text */\n        color: gray;        /* Additional styles */\n        font-size: 1em;\n      }\n    ",document.head.appendChild(i),this.renderer.addClass(n,"centered-placeholder")}updatePlaceholderStyle(n){const i=this.myInput.nativeElement;this.renderer.removeStyle(i,"text-align"),this.renderer.setStyle(i,"text-align","ar"===n?"right":"left")}static#e=this.\u0275fac=function(i){return new(i||t)(e.Y36(Z.e),e.Y36(s.qu),e.Y36(w.F0),e.Y36(C._W),e.Y36(c.sK),e.Y36(e.Qsj))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["app-register"]],viewQuery:function(i,r){if(1&i&&e.Gf(d,7),2&i){let g;e.iGM(g=e.CRH())&&(r.myInput=g.first)}},standalone:!0,features:[e.jDz],decls:55,vars:61,consts:[[1,"bg-main-light","rounded","shadow","p-3"],[1,"display-3","text-center"],[1,"vstack","gap-3","w-75","mx-auto",3,"formGroup","ngSubmit"],[1,"form-item"],["for","name"],["formControlName","name","id","name","type","text",1,"form-control",3,"placeholder"],[4,"ngIf"],["for","email"],["formControlName","email","id","email","type","email",1,"form-control",3,"placeholder"],["for","password"],[1,"position-relative"],["formControlName","password","id","password","type","password",1,"form-control",3,"placeholder"],["pass",""],["role","button",1,"position-absolute","top-50","end-0","translate-middle-y","mx-2",3,"ngClass","click"],[1,"fas","fa-eye"],[1,"fas","fa-eye-slash"],["for","rePassword"],["formControlName","rePassword","id","rePassword","type","Password",1,"form-control",3,"placeholder"],["repass",""],["for","phone"],["formControlName","phone","id","phone","type","tel",1,"form-control","input-phone",3,"placeholder"],["myInput",""],["type","submit","class","main-btn ms-auto",3,"disabled",4,"ngIf"],["type","button","disabled","","class","main-btn ms-auto",4,"ngIf"],["class","alert alert-danger w-50 mx-auto p-1 mb-0",4,"ngIf"],[1,"alert","alert-danger","w-50","mx-auto","p-1","mb-0"],["type","submit",1,"main-btn","ms-auto",3,"disabled"],["type","button","disabled","",1,"main-btn","ms-auto"],[1,"fas","fa-spinner","fa-spin"]],template:function(i,r){if(1&i){const g=e.EpF();e.TgZ(0,"section",0)(1,"h1",1),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"form",2),e.NdJ("ngSubmit",function(){return r.handleRegister()}),e.TgZ(5,"div",3)(6,"label",4),e._uU(7),e.ALo(8,"translate"),e.qZA(),e._UZ(9,"input",5),e.ALo(10,"translate"),e.YNc(11,v,4,3,"ng-container",6),e.qZA(),e.TgZ(12,"div",3)(13,"label",7),e._uU(14),e.ALo(15,"translate"),e.qZA(),e._UZ(16,"input",8),e.ALo(17,"translate"),e.YNc(18,L,3,2,"ng-container",6),e.qZA(),e.TgZ(19,"div",3)(20,"label",9),e._uU(21),e.ALo(22,"translate"),e.qZA(),e.TgZ(23,"div",10),e._UZ(24,"input",11,12),e.ALo(26,"translate"),e.TgZ(27,"span",13),e.NdJ("click",function(){e.CHM(g);const p=e.MAs(25);return r.passwordShow=!0,e.KtG(p.type=1==r.passwordShow?"text":"password")}),e._UZ(28,"i",14),e.qZA(),e.TgZ(29,"span",13),e.NdJ("click",function(){e.CHM(g);const p=e.MAs(25);return r.passwordShow=!1,e.KtG(p.type=0==r.passwordShow?"password":"text")}),e._UZ(30,"i",15),e.qZA()(),e.YNc(31,P,3,2,"ng-container",6),e.qZA(),e.TgZ(32,"div",3)(33,"label",16),e._uU(34),e.ALo(35,"translate"),e.qZA(),e.TgZ(36,"div",10),e._UZ(37,"input",17,18),e.ALo(39,"translate"),e.TgZ(40,"span",13),e.NdJ("click",function(){e.CHM(g);const p=e.MAs(38);return r.rePasswordShow=!0,e.KtG(p.type=1==r.rePasswordShow?"text":"password")}),e._UZ(41,"i",14),e.qZA(),e.TgZ(42,"span",13),e.NdJ("click",function(){e.CHM(g);const p=e.MAs(38);return r.rePasswordShow=!1,e.KtG(p.type=0==r.rePasswordShow?"password":"text")}),e._UZ(43,"i",15),e.qZA()(),e.YNc(44,b,3,2,"ng-container",6),e.qZA(),e.TgZ(45,"div",3)(46,"label",19),e._uU(47),e.ALo(48,"translate"),e.qZA(),e._UZ(49,"input",20,21),e.ALo(51,"translate"),e.YNc(52,Q,3,2,"ng-container",6),e.qZA(),e.YNc(53,S,4,4,"button",22)(54,N,3,0,"button",23),e.qZA()()}2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,23,"Register Now")),e.xp6(2),e.Q6J("formGroup",r.registerForm),e.xp6(3),e.hij("",e.lcZ(8,25,"Name"),":"),e.xp6(2),e.s9C("placeholder",e.lcZ(10,27,"Your Name")),e.xp6(2),e.Q6J("ngIf",r.f.name.errors&&(r.f.name.value.length||r.f.name.touched)),e.xp6(3),e.hij("",e.lcZ(15,29,"Email"),":"),e.xp6(2),e.s9C("placeholder",e.lcZ(17,31,"Your Email")),e.xp6(2),e.Q6J("ngIf",r.f.email.errors&&(r.f.email.value.length||r.f.email.touched)),e.xp6(3),e.hij("",e.lcZ(22,33,"Password"),":"),e.xp6(3),e.s9C("placeholder",e.lcZ(26,35,"Your Password")),e.xp6(3),e.Q6J("ngClass",e.kEZ(45,f,r.passwordShow,"en"===r.translate.currentLang,"ar"===r.translate.currentLang)),e.xp6(2),e.Q6J("ngClass",e.kEZ(49,f,!r.passwordShow,"en"===r.translate.currentLang,"ar"===r.translate.currentLang)),e.xp6(2),e.Q6J("ngIf",r.f.password.errors&&(r.f.password.value.length||r.f.password.touched)),e.xp6(3),e.hij("",e.lcZ(35,37,"RePassword"),":"),e.xp6(3),e.s9C("placeholder",e.lcZ(39,39,"Confirm Password")),e.xp6(3),e.Q6J("ngClass",e.kEZ(53,f,r.rePasswordShow,"en"===r.translate.currentLang,"ar"===r.translate.currentLang)),e.xp6(2),e.Q6J("ngClass",e.kEZ(57,f,!r.rePasswordShow,"en"===r.translate.currentLang,"ar"===r.translate.currentLang)),e.xp6(2),e.Q6J("ngIf",r.f.rePassword.errors&&(r.f.rePassword.value.length||r.f.rePassword.touched)),e.xp6(3),e.hij("",e.lcZ(48,41,"Phone"),":"),e.xp6(2),e.s9C("placeholder",e.lcZ(51,43,"Your Phone")),e.xp6(3),e.Q6J("ngIf",r.f.phone.errors&&(r.f.phone.value.length||r.f.phone.touched)),e.xp6(1),e.Q6J("ngIf",!r.isLoading),e.xp6(1),e.Q6J("ngIf",r.isLoading))},dependencies:[_.ez,_.mk,_.O5,s.UX,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,c.aw,c.X$]})}return t})()}}]);