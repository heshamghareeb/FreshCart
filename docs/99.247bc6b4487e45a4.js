"use strict";(self.webpackChunkFresh_Cart=self.webpackChunkFresh_Cart||[]).push([[99],{8099:(S,m,a)=>{a.r(m),a.d(m,{ForgotpasswordComponent:()=>k});var f=a(6814),s=a(95),o=a(9212),g=a(4768),c=a(1120);const l=["form1"],p=["form2"],d=["form3"];function u(e,r){1&e&&(o.TgZ(0,"p",13),o._uU(1," Email is required "),o.qZA())}function w(e,r){1&e&&(o.TgZ(0,"p",13),o._uU(1," Email InValid Format "),o.qZA())}function h(e,r){if(1&e&&(o.ynx(0),o.YNc(1,u,2,0,"p",12)(2,w,2,0,"p",12),o.BQk()),2&e){const t=o.oxw(2);o.xp6(1),o.Q6J("ngIf",t.f.email.getError("required")),o.xp6(1),o.Q6J("ngIf",t.f.email.getError("email"))}}function x(e,r){if(1&e&&(o.TgZ(0,"button",14),o._uU(1," Next "),o.qZA()),2&e){const t=o.oxw(2);o.Q6J("disabled",t.forgotForm.invalid)}}function C(e,r){1&e&&(o.TgZ(0,"button",15)(1,"span"),o._UZ(2,"i",16),o.qZA()())}function Z(e,r){if(1&e&&(o.TgZ(0,"p",17),o._uU(1),o.qZA()),2&e){const t=o.oxw(2);o.xp6(1),o.hij(" ",t.errMsg," ")}}function T(e,r){if(1&e){const t=o.EpF();o.TgZ(0,"form",3,4),o.NdJ("ngSubmit",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.handleForgotPassword())}),o.TgZ(2,"div",5)(3,"label",6),o._uU(4,"Email:"),o.qZA(),o._UZ(5,"input",7),o.YNc(6,h,3,2,"ng-container",8),o.qZA(),o.YNc(7,x,2,1,"button",9)(8,C,3,0,"button",10)(9,Z,2,1,"p",11),o.qZA()}if(2&e){const t=o.oxw();o.Q6J("formGroup",t.forgotForm),o.xp6(6),o.Q6J("ngIf",t.f.email.errors&&(t.f.email.touched||t.f.email.value.length>0)),o.xp6(1),o.Q6J("ngIf",!t.isLoading),o.xp6(1),o.Q6J("ngIf",t.isLoading),o.xp6(1),o.Q6J("ngIf",t.errMsg)}}function b(e,r){1&e&&(o.TgZ(0,"p",13),o._uU(1," resetCode is required "),o.qZA())}function F(e,r){1&e&&(o.TgZ(0,"p",13),o._uU(1," must be at 6 chars "),o.qZA())}function I(e,r){if(1&e&&(o.ynx(0),o.YNc(1,b,2,0,"p",12)(2,F,2,0,"p",12),o.BQk()),2&e){const t=o.oxw(2);o.xp6(1),o.Q6J("ngIf",t.r.resetCode.getError("required")),o.xp6(1),o.Q6J("ngIf",t.r.resetCode.getError("pattern"))}}function v(e,r){if(1&e&&(o.TgZ(0,"button",14),o._uU(1," Confirm "),o.qZA()),2&e){const t=o.oxw(2);o.Q6J("disabled",t.verifyCode.invalid)}}function A(e,r){1&e&&(o.TgZ(0,"button",15)(1,"span"),o._UZ(2,"i",16),o.qZA()())}function P(e,r){if(1&e&&(o.TgZ(0,"p",17),o._uU(1),o.qZA()),2&e){const t=o.oxw(2);o.xp6(1),o.hij(" ",t.errMsg," ")}}function Q(e,r){if(1&e){const t=o.EpF();o.TgZ(0,"form",3,18),o.NdJ("ngSubmit",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.handleVerifyResetCode())}),o.TgZ(2,"div",5)(3,"label",19),o._uU(4,"Reset Code:"),o.qZA(),o._UZ(5,"input",20),o.YNc(6,I,3,2,"ng-container",8),o.qZA(),o.YNc(7,v,2,1,"button",9)(8,A,3,0,"button",10)(9,P,2,1,"p",11),o.qZA()}if(2&e){const t=o.oxw();o.Q6J("formGroup",t.verifyCode),o.xp6(6),o.Q6J("ngIf",t.r.resetCode.errors&&(t.r.resetCode.touched||t.r.resetCode.value.length>0)),o.xp6(1),o.Q6J("ngIf",!t.isLoading),o.xp6(1),o.Q6J("ngIf",t.isLoading),o.xp6(1),o.Q6J("ngIf",t.errMsg)}}function q(e,r){1&e&&(o.TgZ(0,"p",13),o._uU(1," Email is required "),o.qZA())}function J(e,r){1&e&&(o.TgZ(0,"p",13),o._uU(1," Email InValid Format "),o.qZA())}function E(e,r){if(1&e&&(o.ynx(0),o.YNc(1,q,2,0,"p",12)(2,J,2,0,"p",12),o.BQk()),2&e){const t=o.oxw(2);o.xp6(1),o.Q6J("ngIf",t.c.email.getError("required")),o.xp6(1),o.Q6J("ngIf",t.c.email.getError("email"))}}function U(e,r){1&e&&(o.TgZ(0,"p",25),o._uU(1," New Password Is Required "),o.qZA())}function M(e,r){1&e&&(o.TgZ(0,"p",25),o._uU(1," Must be at least 6 chars "),o.qZA())}function y(e,r){if(1&e&&(o.ynx(0),o.YNc(1,U,2,0,"p",24)(2,M,2,0,"p",24),o.BQk()),2&e){const t=o.oxw(2);o.xp6(1),o.Q6J("ngIf",t.c.newPassword.getError("required")),o.xp6(1),o.Q6J("ngIf",t.c.newPassword.getError("pattern"))}}function N(e,r){if(1&e&&(o.TgZ(0,"button",14),o._uU(1," Done "),o.qZA()),2&e){const t=o.oxw(2);o.Q6J("disabled",t.resetPassword.invalid)}}function L(e,r){1&e&&(o.TgZ(0,"button",15)(1,"span"),o._UZ(2,"i",16),o.qZA()())}function R(e,r){if(1&e&&(o.TgZ(0,"p",17),o._uU(1),o.qZA()),2&e){const t=o.oxw(2);o.xp6(1),o.hij(" ",t.errMsg," ")}}function Y(e,r){if(1&e){const t=o.EpF();o.TgZ(0,"form",3,21),o.NdJ("ngSubmit",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.handleResetPassword())}),o.TgZ(2,"div",5)(3,"label",6),o._uU(4,"Email:"),o.qZA(),o._UZ(5,"input",7),o.YNc(6,E,3,2,"ng-container",8),o.qZA(),o.TgZ(7,"div",5)(8,"label",22),o._uU(9,"newPassword:"),o.qZA(),o._UZ(10,"input",23),o.YNc(11,y,3,2,"ng-container",8),o.qZA(),o.YNc(12,N,2,1,"button",9)(13,L,3,0,"button",10)(14,R,2,1,"p",11),o.qZA()}if(2&e){const t=o.oxw();o.Q6J("formGroup",t.resetPassword),o.xp6(6),o.Q6J("ngIf",t.c.email.errors&&(t.c.email.touched||t.c.email.value.length>0)),o.xp6(5),o.Q6J("ngIf",t.c.newPassword.errors&&(t.c.newPassword.value.length||t.c.newPassword.touched)),o.xp6(1),o.Q6J("ngIf",!t.isLoading),o.xp6(1),o.Q6J("ngIf",t.isLoading),o.xp6(1),o.Q6J("ngIf",t.errMsg)}}let k=(()=>{class e{constructor(t,n,i){this._AuthService=t,this._Renderer2=n,this._Router=i,this.first=!0,this.seconde=!1,this.done=!1,this.isLoading=!1,this.errMsg="",this.email=""}ngOnInit(){this.forgotForm=new s.cw({email:new s.NI("",[s.kI.required,s.kI.email])}),this.verifyCode=new s.cw({resetCode:new s.NI("",[s.kI.required,s.kI.pattern(/^\d{6}$/)])}),this.resetPassword=new s.cw({email:new s.NI("",[s.kI.required,s.kI.email]),newPassword:new s.NI("",[s.kI.required,s.kI.pattern(/^\w{6,}$/)])})}get f(){return this.forgotForm.controls}get r(){return this.verifyCode.controls}get c(){return this.resetPassword.controls}handleForgotPassword(){this.isLoading=!0,this.forgotForm.valid&&(console.log(this.forgotForm.value),this._AuthService.setForgotPassword(this.forgotForm.value).subscribe({next:t=>{console.log(t),"success"===t.statusMsg&&(this.errMsg=t.message,this.isLoading=!1,this.forgotForm.disable(),this.email=this.forgotForm.get("email")?.value,this.first=!1,this.seconde=!0)},error:t=>{console.log(t),this.errMsg=t.error.message,this.isLoading=!1}}))}handleVerifyResetCode(){this.isLoading=!0,this.verifyCode.valid&&(console.log(this.verifyCode.value),this._AuthService.setVerifyResetCode(this.verifyCode.value).subscribe({next:t=>{console.log(t),"Success"===t.status&&(this.errMsg=t.status,this.isLoading=!1,this.verifyCode.disable(),this.seconde=!1,this.done=!0,this.resetPassword.get("email")?.setValue(this.email),this.resetPassword.get("email")?.disable())},error:t=>{console.log(t),this.errMsg=t.error.message,this.isLoading=!1}}))}handleResetPassword(){if(this.isLoading=!0,this.resetPassword.valid){console.log(this.resetPassword.value);const t={email:this.email,newPassword:this.resetPassword.get("newPassword")?.value};this._AuthService.resetPassword(t).subscribe({next:n=>{console.log(n),n?.token&&(this.errMsg=n.message,localStorage.setItem("_token",n?.token),this._AuthService.saveUser(),this.isLoading=!1,this.resetPassword.disable(),setTimeout(()=>{this._Router.navigate(["/home"])},1e3))},error:n=>{console.log(n),this.errMsg=n.error.message,this.isLoading=!1}})}}static#o=this.\u0275fac=function(n){return new(n||e)(o.Y36(g.e),o.Y36(o.Qsj),o.Y36(c.F0))};static#t=this.\u0275cmp=o.Xpm({type:e,selectors:[["app-forgotpassword"]],viewQuery:function(n,i){if(1&n&&(o.Gf(l,5),o.Gf(p,5),o.Gf(d,5)),2&n){let _;o.iGM(_=o.CRH())&&(i.form1=_.first),o.iGM(_=o.CRH())&&(i.form2=_.first),o.iGM(_=o.CRH())&&(i.form3=_.first)}},standalone:!0,features:[o.jDz],decls:6,vars:3,consts:[[1,"bg-main-light","rounded","p-3","shadow","w-50","mx-auto"],[1,"text-center","h3"],["class","vstack gap-3",3,"formGroup","ngSubmit",4,"ngIf"],[1,"vstack","gap-3",3,"formGroup","ngSubmit"],["form1",""],[1,"form-item"],["for","email"],["type","email","formControlName","email","placeholder","Your Email...",1,"form-control"],[4,"ngIf"],["class","main-btn",3,"disabled",4,"ngIf"],["type","button","disabled","","class","main-btn ms-auto",4,"ngIf"],["class","alert alert-danger text-center w-50 mx-auto mb-0 p-1 mt-3",4,"ngIf"],["class","alert alert-danger w-50 p-1 small",4,"ngIf"],[1,"alert","alert-danger","w-50","p-1","small"],[1,"main-btn",3,"disabled"],["type","button","disabled","",1,"main-btn","ms-auto"],[1,"fas","fa-spinner","fa-spin"],[1,"alert","alert-danger","text-center","w-50","mx-auto","mb-0","p-1","mt-3"],["form2",""],["for","resetCode"],["type","text","formControlName","resetCode","placeholder","Your Reset Code...",1,"form-control"],["form3",""],["for","newPassword"],["type","password","formControlName","newPassword","placeholder","Your newPassword...",1,"form-control"],["class","alert alert-danger w-50 mx-auto p-1 mb-0",4,"ngIf"],[1,"alert","alert-danger","w-50","mx-auto","p-1","mb-0"]],template:function(n,i){1&n&&(o.TgZ(0,"section",0)(1,"h1",1),o._uU(2,"Forgot Password"),o.qZA(),o.YNc(3,T,10,5,"form",2)(4,Q,10,5,"form",2)(5,Y,15,6,"form",2),o.qZA()),2&n&&(o.xp6(3),o.Q6J("ngIf",i.first),o.xp6(1),o.Q6J("ngIf",i.seconde),o.xp6(1),o.Q6J("ngIf",i.done))},dependencies:[f.ez,f.O5,s.UX,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u]})}return e})()}}]);