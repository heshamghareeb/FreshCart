"use strict";(self.webpackChunkFresh_Cart=self.webpackChunkFresh_Cart||[]).push([[177],{2893:(h,i,e)=>{e.d(i,{N:()=>l});var n=e(9212),a=e(5619),t=e(553),u=e(1474);let l=(()=>{class o{constructor(s){this._HttpClient=s,this.baseUrl="https://ecommerce.routemisr.com/api/v1/",this.cartNumber=new a.X(0),this.cartNumberSignal=(0,n.tdS)(0)}addToCart(s){return this._HttpClient.post(t.N.baseUrlData+"/cart",{productId:s})}getCartUser(){return this._HttpClient.get(t.N.baseUrlData+"/cart")}removeCartItem(s){return this._HttpClient.delete(this.baseUrl+`cart/${s}`)}updateCartCount(s,r){return this._HttpClient.put(this.baseUrl+`cart/${s}`,{count:r})}clearCart(){return this._HttpClient.delete(this.baseUrl+"cart")}checkOut(s,r){return this._HttpClient.post(this.baseUrl+`orders/checkout-session/${s}?url=https://heshamghareeb.github.io/freshcart`,{shippingAddress:r})}updateCartNumberSignal(s){this.cartNumberSignal.update(()=>s)}static#t=this.\u0275fac=function(r){return new(r||o)(n.LFG(u.eN))};static#e=this.\u0275prov=n.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})()},5177:(h,i,e)=>{e.r(i),e.d(i,{PaymentComponent:()=>o});var n=e(6814),a=e(6223),t=e(9212),u=e(101),l=e(2893);let o=(()=>{class m{constructor(r,c){this._ActivatedRoute=r,this._CartService=c,this.cartId="",this.orderForm=new a.cw({details:new a.NI(""),phone:new a.NI(""),city:new a.NI("")})}ngOnInit(){this._ActivatedRoute.paramMap.subscribe({next:r=>{this.cartId=r.get("id")}})}handleForm(){this._CartService.checkOut(this.cartId,this.orderForm.value).subscribe({next:r=>{"success"==r.status&&(console.log(r,"response handleForm checkOut"),window.open(r.session.url,"_self"))}})}static#t=this.\u0275fac=function(c){return new(c||m)(t.Y36(u.gz),t.Y36(l.N))};static#e=this.\u0275cmp=t.Xpm({type:m,selectors:[["app-payment"]],standalone:!0,features:[t.jDz],decls:18,vars:1,consts:[[1,"w-75","mx-auto","rounded","shadow","p-3","bg-main-light","mb-3"],[3,"formGroup","ngSubmit"],[1,"form-item"],["for","details"],["type","text","id","details","formControlName","details",1,"form-control"],["for","phone"],["type","tel","id","phone","formControlName","phone",1,"form-control"],["for","city"],["type","text","id","city","formControlName","city",1,"form-control"],[1,"main-btn","mt-3"]],template:function(c,_){1&c&&(t.TgZ(0,"section",0)(1,"h1"),t._uU(2,"CheckOut Session"),t.qZA(),t.TgZ(3,"form",1),t.NdJ("ngSubmit",function(){return _.handleForm()}),t.TgZ(4,"div",2)(5,"label",3),t._uU(6,"details"),t.qZA(),t._UZ(7,"input",4),t.qZA(),t.TgZ(8,"div",2)(9,"label",5),t._uU(10,"phone"),t.qZA(),t._UZ(11,"input",6),t.qZA(),t.TgZ(12,"div",2)(13,"label",7),t._uU(14,"city"),t.qZA(),t._UZ(15,"input",8),t.qZA(),t.TgZ(16,"button",9),t._uU(17,"CheckOut"),t.qZA()()()),2&c&&(t.xp6(3),t.Q6J("formGroup",_.orderForm))},dependencies:[n.ez,a.UX,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u]})}return m})()},553:(h,i,e)=>{e.d(i,{N:()=>n});const n={baseUrlAuth:"https://ecommerce.routemisr.com/api/v1/auth",baseUrlUser:"https://ecommerce.routemisr.com/api/v1",baseUrlData:"https://ecommerce.routemisr.com/api/v1",payUrl:"https://heshamghareeb.github.io/freshcart"}}}]);