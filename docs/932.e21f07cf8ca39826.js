"use strict";(self.webpackChunkFresh_Cart=self.webpackChunkFresh_Cart||[]).push([[932],{4768:(A,_,a)=>{a.d(_,{e:()=>Z});var m=a(8784),r=a(5619);const l_baseUrlAuth="https://ecommerce.routemisr.com/api/v1/auth";var u=a(9212),t=a(1474),L=a(101);let Z=(()=>{class c{constructor(o,i){this._HttpClient=o,this._Router=i,this.userData=new r.X(null),this.saveUser()}saveUser(){const o=localStorage.getItem("_token");if(o)try{const i=(0,m.o)(o);i.name&&this.userData.next(i)}catch(i){i.message.includes("Invalid token")&&(localStorage.removeItem("_token"),this._Router.navigate(["/login"]))}}setRegister(o){return this._HttpClient.post(l_baseUrlAuth+"/signup",o)}setLogin(o){return this._HttpClient.post(l_baseUrlAuth+"/signin",o)}setForgotPassword(o){return this._HttpClient.post(l_baseUrlAuth+"/forgotPasswords",o)}setVerifyResetCode(o){return this._HttpClient.post(l_baseUrlAuth+"/verifyResetCode",o)}resetPassword(o){return this._HttpClient.put(l_baseUrlAuth+"/resetPassword",o)}setChangePassword(o){return this._HttpClient.put("https://ecommerce.routemisr.com/api/v1/users/changeMyPassword",o)}static#t=this.\u0275fac=function(i){return new(i||c)(u.LFG(t.eN),u.LFG(L.F0))};static#e=this.\u0275prov=u.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"})}return c})()},6666:(A,_,a)=>{a.r(_),a.d(_,{LoginComponent:()=>E});var m=a(6814),r=a(6223),l=a(101),u=a(2618),t=a(9212),L=a(4768),Z=a(2425);function c(e,p){1&e&&(t.TgZ(0,"p",19),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Email Is Required")," "))}function C(e,p){1&e&&(t.TgZ(0,"p",19),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Email Invalid Format")," "))}function o(e,p){if(1&e&&(t.ynx(0),t.YNc(1,c,3,3,"p",18)(2,C,3,3,"p",18),t.BQk()),2&e){const s=t.oxw();t.xp6(1),t.Q6J("ngIf",s.f.email.getError("required")),t.xp6(1),t.Q6J("ngIf",s.f.email.getError("email"))}}function i(e,p){1&e&&(t.TgZ(0,"p",19),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Password Is Required")," "))}function w(e,p){1&e&&(t.TgZ(0,"p",19),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Must be at least 6 chars")," "))}function U(e,p){if(1&e&&(t.ynx(0),t.YNc(1,i,3,3,"p",18)(2,w,3,3,"p",18),t.BQk()),2&e){const s=t.oxw();t.xp6(1),t.Q6J("ngIf",s.f.password.getError("required")),t.xp6(1),t.Q6J("ngIf",s.f.password.getError("pattern"))}}function b(e,p){if(1&e&&(t.TgZ(0,"button",20)(1,"span"),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&e){const s=t.oxw();t.Q6J("disabled",s.loginForm.invalid),t.xp6(2),t.Oqu(t.lcZ(3,2,"Login"))}}function T(e,p){1&e&&(t.TgZ(0,"button",21)(1,"span"),t._UZ(2,"i",22),t.qZA()())}const v=(e,p,s)=>({"d-none":e,"end-0":p,"start-0":s});let E=(()=>{class e{constructor(s,g,n,h,f){this._AuthService=s,this._fb=g,this._Router=n,this.toastr=h,this.translate=f,this.passwordShow=!1,this.isLoading=!1}ngOnInit(){this.loginForm=this._fb.group({email:["test13@test.com",[r.kI.required,r.kI.email]],password:["123456",[r.kI.required,r.kI.pattern(/^\w{6,}$/)]]})}get f(){return this.loginForm.controls}handleLogin(){this.isLoading=!0,this.loginForm.valid&&this._AuthService.setLogin(this.loginForm.value).subscribe({next:s=>{"success"===s.message&&(this.isLoading=!1,localStorage.setItem("_token",s.token),this._AuthService.saveUser(),this._Router.navigate(["/home"]))},error:s=>{this.isLoading=!1,this.toastr.error(s.error.message,"Error",{progressBar:!0})}})}static#t=this.\u0275fac=function(g){return new(g||e)(t.Y36(L.e),t.Y36(r.qu),t.Y36(l.F0),t.Y36(Z._W),t.Y36(u.sK))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-login"]],standalone:!0,features:[t.jDz],decls:31,vars:33,consts:[[1,"bg-main-light","rounded","shadow","p-3"],[1,"display-4","text-center"],[1,"vstack","gap-3","w-75","mx-auto",3,"formGroup","ngSubmit"],[1,"form-item"],["for","email"],["formControlName","email","id","email","type","email",1,"form-control",3,"placeholder"],[4,"ngIf"],["for","password"],[1,"position-relative"],["formControlName","password","id","password","type","password",1,"form-control",3,"placeholder"],["pass",""],["role","button",1,"position-absolute","top-50","end-0","translate-middle-y","mx-2",3,"ngClass","click"],[1,"fas","fa-eye"],[1,"fas","fa-eye-slash"],[1,"hstack","justify-content-between"],["type","submit","class","main-btn",3,"disabled",4,"ngIf"],["type","button","disabled","","class","main-btn me-auto",4,"ngIf"],["role","button","routerLink","/forgotlogin",1,"link-primary"],["class","alert alert-danger w-50 mx-auto p-1 mb-0",4,"ngIf"],[1,"alert","alert-danger","w-50","mx-auto","p-1","mb-0"],["type","submit",1,"main-btn",3,"disabled"],["type","button","disabled","",1,"main-btn","me-auto"],[1,"fas","fa-spinner","fa-spin"]],template:function(g,n){if(1&g){const h=t.EpF();t.TgZ(0,"section",0)(1,"h1",1),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"form",2),t.NdJ("ngSubmit",function(){return n.handleLogin()}),t.TgZ(5,"div",3)(6,"label",4),t._uU(7),t.ALo(8,"translate"),t.qZA(),t._UZ(9,"input",5),t.ALo(10,"translate"),t.YNc(11,o,3,2,"ng-container",6),t.qZA(),t.TgZ(12,"div",3)(13,"label",7),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.TgZ(16,"div",8),t._UZ(17,"input",9,10),t.ALo(19,"translate"),t.TgZ(20,"span",11),t.NdJ("click",function(){t.CHM(h);const d=t.MAs(18);return n.passwordShow=!0,t.KtG(d.type=1==n.passwordShow?"text":"password")}),t._UZ(21,"i",12),t.qZA(),t.TgZ(22,"span",11),t.NdJ("click",function(){t.CHM(h);const d=t.MAs(18);return n.passwordShow=!1,t.KtG(d.type=0==n.passwordShow?"password":"text")}),t._UZ(23,"i",13),t.qZA()(),t.YNc(24,U,3,2,"ng-container",6),t.qZA(),t.TgZ(25,"div",14),t.YNc(26,b,4,4,"button",15)(27,T,3,0,"button",16),t.TgZ(28,"a",17),t._uU(29),t.ALo(30,"translate"),t.qZA()()()()}2&g&&(t.xp6(2),t.Oqu(t.lcZ(3,13,"Login Now")),t.xp6(2),t.Q6J("formGroup",n.loginForm),t.xp6(3),t.hij("",t.lcZ(8,15,"Email"),":"),t.xp6(2),t.MGl("placeholder","",t.lcZ(10,17,"Your Email"),"...."),t.xp6(2),t.Q6J("ngIf",n.f.email.errors&&(n.f.email.value.length||n.f.email.touched)),t.xp6(3),t.hij("",t.lcZ(15,19,"Password"),":"),t.xp6(3),t.MGl("placeholder","",t.lcZ(19,21,"Your Password"),"...."),t.xp6(3),t.Q6J("ngClass",t.kEZ(25,v,n.passwordShow,"en"===n.translate.currentLang,"ar"===n.translate.currentLang)),t.xp6(2),t.Q6J("ngClass",t.kEZ(29,v,!n.passwordShow,"en"===n.translate.currentLang,"ar"===n.translate.currentLang)),t.xp6(2),t.Q6J("ngIf",n.f.password.errors&&(n.f.password.value.length||n.f.password.touched)),t.xp6(2),t.Q6J("ngIf",!n.isLoading),t.xp6(1),t.Q6J("ngIf",n.isLoading),t.xp6(2),t.Oqu(t.lcZ(30,23,"Forgot Password")))},dependencies:[m.ez,m.mk,m.O5,r.UX,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,l.rH,u.aw,u.X$]})}return e})()}}]);