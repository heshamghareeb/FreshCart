"use strict";(self.webpackChunkFresh_Cart=self.webpackChunkFresh_Cart||[]).push([[395],{4768:(C,u,a)=>{a.d(u,{e:()=>c});var i=a(8784),d=a(5619);const r_baseUrlAuth="https://ecommerce.routemisr.com/api/v1/auth";var t=a(9212),p=a(1474),_=a(101);let c=(()=>{class h{constructor(s,n){this._HttpClient=s,this._Router=n,this.userData=new d.X(null),this.saveUser()}saveUser(){const s=localStorage.getItem("_token");if(s)try{const n=(0,i.o)(s);n.name&&this.userData.next(n)}catch(n){n.message.includes("Invalid token")&&(localStorage.removeItem("_token"),this._Router.navigate(["/login"]))}}setRegister(s){return this._HttpClient.post(r_baseUrlAuth+"/signup",s)}setLogin(s){return this._HttpClient.post(r_baseUrlAuth+"/signin",s)}setForgotPassword(s){return this._HttpClient.post(r_baseUrlAuth+"/forgotPasswords",s)}setVerifyResetCode(s){return this._HttpClient.post(r_baseUrlAuth+"/verifyResetCode",s)}resetPassword(s){return this._HttpClient.put(r_baseUrlAuth+"/resetPassword",s)}setChangePassword(s){return this._HttpClient.put("https://ecommerce.routemisr.com/api/v1/users/changeMyPassword",s)}static#t=this.\u0275fac=function(n){return new(n||h)(t.LFG(p.eN),t.LFG(_.F0))};static#e=this.\u0275prov=t.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"})}return h})()},5491:(C,u,a)=>{a.d(u,{J:()=>_});var i=a(9212),d=a(5619),r=a(553),t=a(1474),p=a(2425);let _=(()=>{class c{constructor(e,s){this._HttpClient=e,this._ToastrService=s,this.cartNumberSignal=(0,i.tdS)(0),this.wishList=new d.X([]),this.whishNumberSignal=(0,i.tdS)(0),this.products=[]}getUserOrders(e){return this._HttpClient.get(r.N.baseUrlData+"/orders/user/"+e)}addToCart(e){this.sendToCart(e).subscribe({next:s=>{"success"===s.status&&(this._ToastrService.success(s.message),this.updateCartNumberSignal(s.numOfCartItems))}})}updateCartNumberSignal(e){this.cartNumberSignal.update(()=>e)}SetcheckOut(e,s){return this._HttpClient.post(r.N.baseUrlData+`/orders/checkout-session/${e}?url=${r.N.payUrl}`,s)}getProducts(e=1){return this._HttpClient.get(r.N.baseUrlData+`/products?page=${e}`)}getProductById(e){return this._HttpClient.get(r.N.baseUrlData+"/products/"+e)}getCategories(){return this._HttpClient.get(r.N.baseUrlData+"/categories")}getCategoriesById(e){return this._HttpClient.get(r.N.baseUrlData+"/categories/"+e)}getSubCategoriesToCat(e){return this._HttpClient.get(r.N.baseUrlData+`/categories/${e}/subcategories`)}sendToCart(e){return this._HttpClient.post(r.N.baseUrlData+"/cart",{productId:e})}getCartData(){return this._HttpClient.get(r.N.baseUrlData+"/cart")}clearCart(){return this._HttpClient.delete(r.N.baseUrlData+"/cart")}updatePoductCount(e,s){return this._HttpClient.put(r.N.baseUrlData+"/cart/"+e,{count:s})}deletePoductCart(e){return this._HttpClient.delete(r.N.baseUrlData+"/cart/"+e)}getBrands(e=1){return this._HttpClient.get(r.N.baseUrlData+`/brands?page=${e}`)}getBrandData(e){return this._HttpClient.get(r.N.baseUrlData+`/brands/${e}`)}setWishlist(e){return this._HttpClient.post(r.N.baseUrlData+"/wishlist",{productId:e})}removeWishlist(e){return this._HttpClient.delete(r.N.baseUrlData+`/wishlist/${e}`)}getWishlist(){return this._HttpClient.get(r.N.baseUrlData+"/wishlist")}updateWishlistItem(e){this.wishList.next(e)}updateWhishNumberSignal(e){this.whishNumberSignal.update(()=>e)}setAddresses(e){return this._HttpClient.post(r.N.baseUrlData+"/addresses",e)}getAddresses(){return this._HttpClient.get(r.N.baseUrlData+"/addresses")}removeAddresses(e){return this._HttpClient.delete(r.N.baseUrlData+`/addresses/${e}`)}static#t=this.\u0275fac=function(s){return new(s||c)(i.LFG(t.eN),i.LFG(p._W))};static#e=this.\u0275prov=i.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"})}return c})()},7395:(C,u,a)=>{a.r(u),a.d(u,{ProfileComponent:()=>e});var i=a(2425),d=a(6814),r=a(6223),t=a(9212),p=a(5491),_=a(4768);function c(s,n){if(1&s){const o=t.EpF();t.TgZ(0,"tr",14)(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"span",15),t.NdJ("click",function(){const g=t.CHM(o).$implicit,b=t.oxw(2);return t.KtG(b.removeAddress(g._id))}),t._UZ(10,"i",16),t.qZA()()}if(2&s){const o=n.$implicit;t.xp6(2),t.Oqu(o.name),t.xp6(2),t.Oqu(o.details),t.xp6(2),t.Oqu(o.phone),t.xp6(2),t.Oqu(o.city)}}function h(s,n){if(1&s&&(t.TgZ(0,"table",11)(1,"thead")(2,"tr",12)(3,"th"),t._uU(4,"Name:"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Details:"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Phone:"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"City:"),t.qZA()()(),t.TgZ(11,"tbody"),t.YNc(12,c,11,4,"tr",13),t.qZA()()),2&s){const o=t.oxw();t.xp6(12),t.Q6J("ngForOf",o.profileData)}}let e=(()=>{class s{constructor(o,l,m,g){this._EcomdataService=o,this._AuthService=l,this._fb=m,this._ToastrService=g,this.userName="",this.profileData=[]}ngOnInit(){this._AuthService.userData.subscribe(o=>{this.userName=o.name}),this.addressForm=this._fb.group({name:[""],details:[""],phone:[""],city:[""]}),this._EcomdataService.getAddresses().subscribe({next:o=>{this.profileData=o.data}})}addAddress(){this._EcomdataService.setAddresses(this.addressForm.value).subscribe({next:o=>{this.profileData=o.data,this.addressForm.reset(),this._ToastrService.success(o.message)}})}removeAddress(o){this._EcomdataService.removeAddresses(o).subscribe({next:l=>{this.profileData=l.data,this._ToastrService.success(l.message)}})}static#t=this.\u0275fac=function(l){return new(l||s)(t.Y36(p.J),t.Y36(_.e),t.Y36(r.qu),t.Y36(i._W))};static#e=this.\u0275cmp=t.Xpm({type:s,selectors:[["app-profile"]],standalone:!0,features:[t.jDz],decls:17,vars:3,consts:[[1,"text-center"],[1,"table-responsive","table-data"],["class","table",4,"ngIf"],[1,"border","rounded","p-3","shadow","mt-5",3,"formGroup","ngSubmit"],[1,"row","g-3"],[1,"col-md-6","col-lg-4","col-xl-3"],["type","text","placeholder","Name","formControlName","name",1,"form-control"],["placeholder","Details","formControlName","details",1,"form-control"],["type","tel","placeholder","Phone","formControlName","phone",1,"form-control"],["type","text","placeholder","City","formControlName","city",1,"form-control"],["type","submit",1,"main-btn","mx-auto"],[1,"table"],[1,"table-primary"],["class","small position-relative",4,"ngFor","ngForOf"],[1,"small","position-relative"],["role","button",1,"position-absolute","end-0","top-50","translate-middle-y","me-4","delete",3,"click"],[1,"fas","fa-trash","text-danger","fa-xl"]],template:function(l,m){1&l&&(t.TgZ(0,"section")(1,"h1",0),t._uU(2),t.qZA(),t.TgZ(3,"div",1),t.YNc(4,h,13,1,"table",2),t.qZA(),t.TgZ(5,"form",3),t.NdJ("ngSubmit",function(){return m.addAddress()}),t.TgZ(6,"div",4)(7,"div",5),t._UZ(8,"input",6),t.qZA(),t.TgZ(9,"div",5),t._UZ(10,"input",7),t.qZA(),t.TgZ(11,"div",5),t._UZ(12,"input",8),t.qZA(),t.TgZ(13,"div",5),t._UZ(14,"input",9),t.qZA(),t.TgZ(15,"button",10),t._uU(16,"ADD ADDRESS"),t.qZA()()()()),2&l&&(t.xp6(2),t.hij("Hello Mr: ",m.userName,""),t.xp6(2),t.Q6J("ngIf",m.profileData.length),t.xp6(1),t.Q6J("formGroup",m.addressForm))},dependencies:[d.ez,d.sg,d.O5,r.UX,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,i.Rh],styles:[".table-data[_ngcontent-%COMP%]{max-height:60vh;overflow-y:auto}.table-data[_ngcontent-%COMP%]::-webkit-scrollbar-track{width:initial!important}.table-data[_ngcontent-%COMP%]::-webkit-scrollbar-track{background-color:initial!important}.table-data[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{all:unset;background-color:#07b020}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]{opacity:0;transition:opacity 1s}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover   .delete[_ngcontent-%COMP%]{opacity:1}"]})}return s})()},553:(C,u,a)=>{a.d(u,{N:()=>i});const i={baseUrlAuth:"https://ecommerce.routemisr.com/api/v1/auth",baseUrlUser:"https://ecommerce.routemisr.com/api/v1",baseUrlData:"https://ecommerce.routemisr.com/api/v1",payUrl:"https://heshamghareeb.github.io/freshcart"}}}]);