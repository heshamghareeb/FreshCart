"use strict";(self.webpackChunkFresh_Cart=self.webpackChunkFresh_Cart||[]).push([[932],{4768:(b,d,r)=>{r.d(d,{e:()=>v});var g=r(8784),a=r(5619);const l_baseUrlAuth="https://ecommerce.routemisr.com/api/v1/auth";var t=r(9212),f=r(1474),h=r(101);let v=(()=>{class p{constructor(o,i){this._HttpClient=o,this._Router=i,this.userData=new a.X(null),this.saveUser()}saveUser(){const o=localStorage.getItem("_token");if(o)try{const i=(0,g.o)(o);i.name&&this.userData.next(i)}catch(i){i.message.includes("Invalid token")&&(localStorage.removeItem("_token"),this._Router.navigate(["/login"]))}}setRegister(o){return this._HttpClient.post(l_baseUrlAuth+"/signup",o)}setLogin(o){return this._HttpClient.post(l_baseUrlAuth+"/signin",o)}setForgotPassword(o){return this._HttpClient.post(l_baseUrlAuth+"/forgotPasswords",o)}setVerifyResetCode(o){return this._HttpClient.post(l_baseUrlAuth+"/verifyResetCode",o)}resetPassword(o){return this._HttpClient.put(l_baseUrlAuth+"/resetPassword",o)}setChangePassword(o){return this._HttpClient.put("https://ecommerce.routemisr.com/api/v1/users/changeMyPassword",o)}static#t=this.\u0275fac=function(i){return new(i||p)(t.LFG(f.eN),t.LFG(h.F0))};static#e=this.\u0275prov=t.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"})}return p})()},6666:(b,d,r)=>{r.r(d),r.d(d,{LoginComponent:()=>A});var g=r(6814),a=r(6223),l=r(101),t=r(9212),f=r(4768),h=r(2425);function v(e,u){1&e&&(t.TgZ(0,"p",19),t._uU(1," Email Is Required "),t.qZA())}function p(e,u){1&e&&(t.TgZ(0,"p",19),t._uU(1," Email Invalid Format "),t.qZA())}function U(e,u){if(1&e&&(t.ynx(0),t.YNc(1,v,2,0,"p",18)(2,p,2,0,"p",18),t.BQk()),2&e){const s=t.oxw();t.xp6(1),t.Q6J("ngIf",s.f.email.getError("required")),t.xp6(1),t.Q6J("ngIf",s.f.email.getError("email"))}}function o(e,u){1&e&&(t.TgZ(0,"p",19),t._uU(1," Password Is Required "),t.qZA())}function i(e,u){1&e&&(t.TgZ(0,"p",19),t._uU(1," Must be at least 6 chars "),t.qZA())}function L(e,u){if(1&e&&(t.ynx(0),t.YNc(1,o,2,0,"p",18)(2,i,2,0,"p",18),t.BQk()),2&e){const s=t.oxw();t.xp6(1),t.Q6J("ngIf",s.f.password.getError("required")),t.xp6(1),t.Q6J("ngIf",s.f.password.getError("pattern"))}}function Z(e,u){if(1&e&&(t.TgZ(0,"button",20)(1,"span"),t._uU(2,"Login"),t.qZA()()),2&e){const s=t.oxw();t.Q6J("disabled",s.loginForm.invalid)}}function T(e,u){1&e&&(t.TgZ(0,"button",21)(1,"span"),t._UZ(2,"i",22),t.qZA()())}const C=e=>({"d-none":e});let A=(()=>{class e{constructor(s,m,n,_){this._AuthService=s,this._fb=m,this._Router=n,this.toastr=_,this.passwordShow=!1,this.isLoading=!1}ngOnInit(){this.loginForm=this._fb.group({email:["test13@test.com",[a.kI.required,a.kI.email]],password:["123456",[a.kI.required,a.kI.pattern(/^\w{6,}$/)]]})}get f(){return this.loginForm.controls}handleLogin(){this.isLoading=!0,this.loginForm.valid&&this._AuthService.setLogin(this.loginForm.value).subscribe({next:s=>{"success"===s.message&&(this.isLoading=!1,localStorage.setItem("_token",s.token),this._AuthService.saveUser(),this._Router.navigate(["/home"]))},error:s=>{this.isLoading=!1,this.toastr.error(s.error.message,"Error",{progressBar:!0})}})}static#t=this.\u0275fac=function(m){return new(m||e)(t.Y36(f.e),t.Y36(a.qu),t.Y36(l.F0),t.Y36(h._W))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-login"]],standalone:!0,features:[t.jDz],decls:25,vars:11,consts:[[1,"bg-main-light","rounded","shadow","p-3"],[1,"display-4","text-center"],[1,"vstack","gap-3","w-75","mx-auto",3,"formGroup","ngSubmit"],[1,"form-item"],["for","email"],["formControlName","email","id","email","type","email","placeholder","Your Email....",1,"form-control"],[4,"ngIf"],["for","password"],[1,"position-relative"],["formControlName","password","id","password","type","password","placeholder","Your Password....",1,"form-control"],["pass",""],["role","button",1,"position-absolute","top-50","end-0","translate-middle-y","me-2",3,"ngClass","click"],[1,"fas","fa-eye"],[1,"fas","fa-eye-slash"],[1,"hstack","justify-content-between"],["type","submit","class","main-btn",3,"disabled",4,"ngIf"],["type","button","disabled","","class","main-btn me-auto",4,"ngIf"],["role","button","routerLink","/forgotlogin",1,"link-primary"],["class","alert alert-danger w-50 mx-auto p-1 mb-0",4,"ngIf"],[1,"alert","alert-danger","w-50","mx-auto","p-1","mb-0"],["type","submit",1,"main-btn",3,"disabled"],["type","button","disabled","",1,"main-btn","me-auto"],[1,"fas","fa-spinner","fa-spin"]],template:function(m,n){if(1&m){const _=t.EpF();t.TgZ(0,"section",0)(1,"h1",1),t._uU(2,"Login Now"),t.qZA(),t.TgZ(3,"form",2),t.NdJ("ngSubmit",function(){return n.handleLogin()}),t.TgZ(4,"div",3)(5,"label",4),t._uU(6,"Email:"),t.qZA(),t._UZ(7,"input",5),t.YNc(8,U,3,2,"ng-container",6),t.qZA(),t.TgZ(9,"div",3)(10,"label",7),t._uU(11,"Password:"),t.qZA(),t.TgZ(12,"div",8),t._UZ(13,"input",9,10),t.TgZ(15,"span",11),t.NdJ("click",function(){t.CHM(_);const c=t.MAs(14);return n.passwordShow=!0,t.KtG(c.type=1==n.passwordShow?"text":"password")}),t._UZ(16,"i",12),t.qZA(),t.TgZ(17,"span",11),t.NdJ("click",function(){t.CHM(_);const c=t.MAs(14);return n.passwordShow=!1,t.KtG(c.type=0==n.passwordShow?"password":"text")}),t._UZ(18,"i",13),t.qZA()(),t.YNc(19,L,3,2,"ng-container",6),t.qZA(),t.TgZ(20,"div",14),t.YNc(21,Z,3,1,"button",15)(22,T,3,0,"button",16),t.TgZ(23,"a",17),t._uU(24,"Forgot Password"),t.qZA()()()()}2&m&&(t.xp6(3),t.Q6J("formGroup",n.loginForm),t.xp6(5),t.Q6J("ngIf",n.f.email.errors&&(n.f.email.value.length||n.f.email.touched)),t.xp6(7),t.Q6J("ngClass",t.VKq(7,C,n.passwordShow)),t.xp6(2),t.Q6J("ngClass",t.VKq(9,C,!n.passwordShow)),t.xp6(2),t.Q6J("ngIf",n.f.password.errors&&(n.f.password.value.length||n.f.password.touched)),t.xp6(2),t.Q6J("ngIf",!n.isLoading),t.xp6(1),t.Q6J("ngIf",n.isLoading))},dependencies:[g.ez,g.mk,g.O5,a.UX,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u,l.rH]})}return e})()}}]);