"use strict";(self.webpackChunkFresh_Cart=self.webpackChunkFresh_Cart||[]).push([[510],{2893:(h,l,n)=>{n.d(l,{N:()=>g});var i=n(9212),m=n(5619),p=n(553),d=n(1474);let g=(()=>{class t{constructor(s){this._HttpClient=s,this.baseUrl="https://ecommerce.routemisr.com/api/v1/",this.cartNumber=new m.X(0),this.cartNumberSignal=(0,i.tdS)(0)}addToCart(s){return this._HttpClient.post(p.N.baseUrlData+"/cart",{productId:s})}getCartUser(){return this._HttpClient.get(p.N.baseUrlData+"/cart")}removeCartItem(s){return this._HttpClient.delete(this.baseUrl+`cart/${s}`)}updateCartCount(s,c){return this._HttpClient.put(this.baseUrl+`cart/${s}`,{count:c})}clearCart(){return this._HttpClient.delete(this.baseUrl+"cart")}checkOut(s,c){return this._HttpClient.post(this.baseUrl+`orders/checkout-session/${s}?url=https://heshamghareeb.github.io/freshcart`,{shippingAddress:c})}updateCartNumberSignal(s){this.cartNumberSignal.update(()=>s)}static#t=this.\u0275fac=function(c){return new(c||t)(i.LFG(d.eN))};static#e=this.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})()},9510:(h,l,n)=>{n.r(l),n.d(l,{ProductsComponent:()=>O});var i=n(6814),m=n(101),p=n(1651),d=n(6472),g=n(2618),t=n(9212),C=n(1285),s=n(2893),c=n(2425);function P(a,u){if(1&a&&t._UZ(0,"i",19),2&a){const e=u.$implicit,r=t.oxw().$implicit;t.ekj("rating-color",r.ratingsAverage>=e)}}const v=a=>["/productdetails",a],x=()=>[1,2,3,4,5];function E(a,u){if(1&a){const e=t.EpF();t.TgZ(0,"div",7)(1,"div",8)(2,"header",9),t._UZ(3,"img",10),t.TgZ(4,"h3",11),t._uU(5),t.ALo(6,"cuttext"),t.qZA(),t.TgZ(7,"h4",12),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"div",13)(11,"span"),t._uU(12),t.ALo(13,"currency"),t.qZA(),t.TgZ(14,"p",14),t.YNc(15,P,1,2,"i",15),t.TgZ(16,"span",16),t._uU(17),t.qZA()()()(),t.TgZ(18,"footer")(19,"button",17,18),t.NdJ("click",function(){const _=t.CHM(e).$implicit,T=t.MAs(20),M=t.oxw(2);return t.KtG(M.addProduct(_._id,T))}),t._uU(21," +Add To Cart "),t.qZA()()()()}if(2&a){const e=u.$implicit;t.xp6(2),t.Q6J("routerLink",t.VKq(17,v,e._id)),t.xp6(1),t.Q6J("src",e.imageCover,t.LSH)("title",e.title)("alt",e.title),t.xp6(2),t.Oqu(t.xi3(6,9,e.title,2)),t.xp6(3),t.Oqu(t.lcZ(9,12,e.category.name)),t.xp6(4),t.hij(" ",t.xi3(13,14,e.price,"e\xa3")," "),t.xp6(3),t.Q6J("ngForOf",t.DdM(19,x)),t.xp6(2),t.hij(" ",e.ratingsAverage," ")}}const f=(a,u,e)=>({id:"productPaginate",itemsPerPage:a,currentPage:u,totalItems:e});function A(a,u){if(1&a){const e=t.EpF();t.TgZ(0,"section",1)(1,"h2",2),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",3),t.YNc(5,E,22,20,"div",4),t.ALo(6,"paginate"),t.qZA(),t.TgZ(7,"div",5)(8,"pagination-controls",6),t.NdJ("pageChange",function(o){t.CHM(e);const _=t.oxw();return t.KtG(_.pageChanged(o))})("pageBoundsCorrection",function(o){t.CHM(e);const _=t.oxw();return t.KtG(_.pageChanged(o))}),t.qZA()()()}if(2&a){const e=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,6,"All Products")),t.xp6(3),t.Q6J("ngForOf",t.xi3(6,8,e.products,t.kEZ(11,f,e.pageSize,e.curentPage,e.total))),t.xp6(3),t.Q6J("maxSize",9)("directionLinks",!0)("autoHide",!0)("responsive",!0)}}let O=(()=>{class a{constructor(e,r,o,_){this._ProductService=e,this._CartService=r,this._ToastrService=o,this._Renderer2=_,this.products=[],this.pageSize=0,this.curentPage=1,this.total=0}ngOnInit(){this._ProductService.getProducts().subscribe({next:e=>{this.products=e.data,this.pageSize=e.metadata.limit,this.curentPage=e.metadata.currentPage,this.total=e.results}})}addProduct(e,r){this._Renderer2.setAttribute(r,"disabled","true"),this._CartService.addToCart(e).subscribe({next:o=>{this._ToastrService.success(o.message),this._Renderer2.removeAttribute(r,"disabled"),this._CartService.cartNumber.next(o.numOfCartItems)},error:o=>{this._Renderer2.removeAttribute(r,"disabled")}})}pageChanged(e){this._ProductService.getProducts(e).subscribe({next:r=>{this.products=r.data,this.pageSize=r.metadata.limit,this.curentPage=r.metadata.currentPage,this.total=r.results}})}static#t=this.\u0275fac=function(r){return new(r||a)(t.Y36(C.M),t.Y36(s.N),t.Y36(c._W),t.Y36(t.Qsj))};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["app-products"]],standalone:!0,features:[t.jDz],decls:1,vars:1,consts:[["class","py-4",4,"ngIf"],[1,"py-4"],[1,"text-center"],[1,"row","justify-content-center","g-4"],["class","col-sm-6 col-md-4 col-lg-3 col-xl-2",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-center","mt-4"],["id","productPaginate","previousLabel","Previous","nextLabel","Next","screenReaderPaginationLabel","Pagination","screenReaderPageLabel","page","screenReaderCurrentLabel","You're on page",3,"maxSize","directionLinks","autoHide","responsive","pageChange","pageBoundsCorrection"],[1,"col-sm-6","col-md-4","col-lg-3","col-xl-2"],[1,"product","h-100"],["role","button",3,"routerLink"],[1,"w-100",3,"src","title","alt"],[1,"small"],[1,"h6","text-main"],[1,"d-flex","align-items-center","justify-content-between","small"],[1,"mb-0"],["class","fas fa-star",3,"rating-color",4,"ngFor","ngForOf"],[1,"text-muted"],[1,"main-btn","w-100","py-2",3,"click"],["btnAdd",""],[1,"fas","fa-star"]],template:function(r,o){1&r&&t.YNc(0,A,9,15,"section",0),2&r&&t.Q6J("ngIf",o.products.length>0)},dependencies:[i.ez,i.sg,i.O5,i.H9,m.rH,p.r,d.JX,d._s,d.LS,g.aw,g.X$]})}return a})()}}]);