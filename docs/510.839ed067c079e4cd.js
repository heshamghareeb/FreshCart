"use strict";(self.webpackChunkFresh_Cart=self.webpackChunkFresh_Cart||[]).push([[510],{9510:(O,d,i)=>{i.r(d),i.d(d,{ProductsComponent:()=>A});var s=i(6814),u=i(101),l=i(1651),_=i(6472),t=i(9212),g=i(1285),p=i(2893),m=i(2425);function P(r,a){if(1&r&&t._UZ(0,"i",19),2&r){const e=a.$implicit,o=t.oxw().$implicit;t.ekj("rating-color",o.ratingsAverage>=e)}}const h=r=>["/productdetails",r],C=()=>[1,2,3,4,5];function x(r,a){if(1&r){const e=t.EpF();t.TgZ(0,"div",7)(1,"div",8)(2,"header",9),t._UZ(3,"img",10),t.TgZ(4,"h3",11),t._uU(5),t.ALo(6,"cuttext"),t.qZA(),t.TgZ(7,"h4",12),t._uU(8),t.qZA(),t.TgZ(9,"div",13)(10,"span"),t._uU(11),t.ALo(12,"currency"),t.qZA(),t.TgZ(13,"p",14),t.YNc(14,P,1,2,"i",15),t.TgZ(15,"span",16),t._uU(16),t.qZA()()()(),t.TgZ(17,"footer")(18,"button",17,18),t.NdJ("click",function(){const c=t.CHM(e).$implicit,T=t.MAs(19),E=t.oxw(2);return t.KtG(E.addProduct(c._id,T))}),t._uU(20," +Add To Cart "),t.qZA()()()()}if(2&r){const e=a.$implicit;t.xp6(2),t.Q6J("routerLink",t.VKq(15,h,e._id)),t.xp6(1),t.Q6J("src",e.imageCover,t.LSH)("title",e.title)("alt",e.title),t.xp6(2),t.Oqu(t.xi3(6,9,e.title,2)),t.xp6(3),t.Oqu(e.category.name),t.xp6(3),t.hij(" ",t.xi3(12,12,e.price,"e\xa3")," "),t.xp6(3),t.Q6J("ngForOf",t.DdM(17,C)),t.xp6(2),t.hij(" ",e.ratingsAverage," ")}}const v=(r,a,e)=>({id:"productPaginate",itemsPerPage:r,currentPage:a,totalItems:e});function f(r,a){if(1&r){const e=t.EpF();t.TgZ(0,"section",1)(1,"h2",2),t._uU(2,"All Products"),t.qZA(),t.TgZ(3,"div",3),t.YNc(4,x,21,18,"div",4),t.ALo(5,"paginate"),t.qZA(),t.TgZ(6,"div",5)(7,"pagination-controls",6),t.NdJ("pageChange",function(n){t.CHM(e);const c=t.oxw();return t.KtG(c.pageChanged(n))})("pageBoundsCorrection",function(n){t.CHM(e);const c=t.oxw();return t.KtG(c.pageChanged(n))}),t.qZA()()()}if(2&r){const e=t.oxw();t.xp6(4),t.Q6J("ngForOf",t.xi3(5,5,e.products,t.kEZ(8,v,e.pageSize,e.curentPage,e.total))),t.xp6(3),t.Q6J("maxSize",9)("directionLinks",!0)("autoHide",!0)("responsive",!0)}}let A=(()=>{class r{constructor(e,o,n,c){this._ProductService=e,this._CartService=o,this._ToastrService=n,this._Renderer2=c,this.products=[],this.pageSize=0,this.curentPage=1,this.total=0}ngOnInit(){this._ProductService.getProducts().subscribe({next:e=>{console.log("products",e),this.products=e.data,this.pageSize=e.metadata.limit,this.curentPage=e.metadata.currentPage,this.total=e.results}})}addProduct(e,o){this._Renderer2.setAttribute(o,"disabled","true"),this._CartService.addToCart(e).subscribe({next:n=>{console.log(n),console.log(n.message),this._ToastrService.success(n.message),this._Renderer2.removeAttribute(o,"disabled"),this._CartService.cartNumber.next(n.numOfCartItems)},error:n=>{this._Renderer2.removeAttribute(o,"disabled")}})}pageChanged(e){console.log(e,"event"),this._ProductService.getProducts(e).subscribe({next:o=>{console.log("products",o.data),this.products=o.data,this.pageSize=o.metadata.limit,this.curentPage=o.metadata.currentPage,this.total=o.results}})}static#t=this.\u0275fac=function(o){return new(o||r)(t.Y36(g.M),t.Y36(p.N),t.Y36(m._W),t.Y36(t.Qsj))};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["app-products"]],standalone:!0,features:[t.jDz],decls:1,vars:1,consts:[["class","py-4",4,"ngIf"],[1,"py-4"],[1,"text-center"],[1,"row","justify-content-center","g-4"],["class","col-sm-6 col-md-4 col-lg-3 col-xl-2",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-center","mt-4"],["id","productPaginate","previousLabel","Previous","nextLabel","Next","screenReaderPaginationLabel","Pagination","screenReaderPageLabel","page","screenReaderCurrentLabel","You're on page",3,"maxSize","directionLinks","autoHide","responsive","pageChange","pageBoundsCorrection"],[1,"col-sm-6","col-md-4","col-lg-3","col-xl-2"],[1,"product","h-100"],["role","button",3,"routerLink"],[1,"w-100",3,"src","title","alt"],[1,"small"],[1,"h6","text-main"],[1,"d-flex","align-items-center","justify-content-between","small"],[1,"mb-0"],["class","fas fa-star",3,"rating-color",4,"ngFor","ngForOf"],[1,"text-muted"],[1,"main-btn","w-100","py-2",3,"click"],["btnAdd",""],[1,"fas","fa-star"]],template:function(o,n){1&o&&t.YNc(0,f,8,12,"section",0),2&o&&t.Q6J("ngIf",n.products.length>0)},dependencies:[s.ez,s.sg,s.O5,s.H9,u.rH,l.r,_.JX,_._s,_.LS]})}return r})()}}]);